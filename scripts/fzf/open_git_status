#!/usr/bin/env sh

START_PATH=$(pwd)
SELECTED_PATH=$(git status --porcelain | grep -E '^(M|M | M|\?\?)' | fzf | awk '{print $2}')
printf "%s\n" "$SELECTED_PATH"

if [ -n "$SELECTED_PATH" ]; then
	cd "$(git rev-parse --show-toplevel)" || exit
	nvim "$SELECTED_PATH"
	cd "$START_PATH" || exit
fi
